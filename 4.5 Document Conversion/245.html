<?xml version='1.0' encoding='UTF-8' standalone='yes'?><html>
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/><meta content="2017-04-10" name="publicationdate"/><title>no title</title></head>
<body><p>- 1 - </p><h3><p>オープンなデータベースを利用した行動計画提案に関する研究</p></h3><p> </p><p>Action Planning with Open Knowledge base and Database </p><p>- 施設とサービスに関するオントロジーの利用による OSM 及び DBpedia を用いた施設・地域推薦 - </p><p>- Recommendation of facilities and areas by using the ontologies of facilities and services, Open Street Map and DBpedia - </p><p> 加藤文彦*1 小出誠二*1 武田英明*1*2 落合勇太*3 上田健揮*3 </p><p> Fumihiro Kato Seiji Koide Hideaki Takeda Yuta Ochiai Kenki Ueda </p><p> *1 国立情報学研究所 *2 総合研究大学院大学 *3 トヨタ自動車株式会社 </p><p> National Institute of Informatics SOKENDAI (The Graduate University for Advanced Studies) Toyota Motor Corporation </p><p>This paper is the preliminary report of the project to realize action planning with open knowledge base and database. The goal is recommendation of facilities and areas for drivers and passengers in cars. We realized it by using open knowledge base and database like OpenStreetMap, DBpedia, and WordNet. We combine these datasets by constructing the ontologies of facilities and services. Then we build the inference procedure to process the queries by users to obtain answers including the specific facilities and areas. </p><p>1. はじめに </p><p>知識を用いた推論は 1980 年代ごろ盛んに研究され，第 2 次人工知能ブームの立役者となった．診断分野などでは専門家を支援するエキスパートシステム開発で一定の成果をあげたものの，当初の期待に応えることができず，継続的にシステムが開発されることはなかった． その後も知識を用いた推論については継続的に研究は続けられたが，当時抱えていた問題を解決する理論的革新があったわけではなく，知識推論，ことに常識推論に関しては変わらず困難なタスクであると認識されている [Davis2015]． 確かに理論面で大幅な変化があったわけではないが，知識推論を取り囲む環境は大幅に変わっている．ことに大規模な計算能力と大規模なデータベース，知識ベースが利用可能になったことは顕著な違いである． 本研究では，特に後者，すなわち大規模なデータベース，知識ベースを用いた知識推論の実現を試みる．なお知識推論のゴールは自動車乗員（運転者や同乗者）が発する曖昧な行動目的要求を具体的な行動提案とすることである．この際，目的に関する常識や目的地に関する常識を用いた推論が必要となる．知識としてはオープンなデータベース，知識ベースを用いて， そこにあるデータあるいは知識を直接使うあるいはそこから構築</p><p>[Davis 15] で は 常 識 推 論 の ア プ ロ ー チ を Math-based, Informal, Large-scale, Web mining, Crowd Sourcing の 5 つに分けて論じている．本研究はこのうち，Informal と Large-scale に分類されるアプローチを用いている．なお DBpedia や Wikidata も</p><p>2. 全体の枠組み </p><p>2.1 問題設定 先に述べたように本タスクのゴールは自動車乗員（運転者や同乗者）が発する曖昧な行動目的要求を具体的な行動提案とすることである．乗員は何らかの要求を発話し，システムはその発話に対して応答し，最終的には具体的な行動提案を行う．要求は基本的には目的地に関する要求であるが，単に何かをしたいという行動要求のこともある．行動提案は具体的な訪問地 （店舗や施設，観光地等）や訪問地域とその訪問順序である． なお，本稿では後に述べるように行動要求についてかなり限定的に捉えている．また，自然言語の解釈についても深く考慮しておらず，期待される一定の範囲の文章のみを処理する．入</p><p>2.2 知識の分類とオープンなデータベース，知識ベース 我々の世界に関する情報・知識を，事実に関する知識，一般的知識，経験的知識の 3 つの層に分けて考える．一つは事実に関する知識である．個別の事象，事柄に関する客観的な情報がこれに含まれる．次に世界に関する一般的知識である．これは個別の事象，事柄に関しての情報ではなくて，それらを抽象的に記述したもの，さらにそれらの関係の記述である．この知識はおおよそ客観的に妥当であるか，社会的な合意になっているものである．さらに経験的知識とは，一部の人たちでだけで合意されている知識や個人的知識など，社会に関する一般的知識に入らない知識である．例えば，ある場所にあるファーストフードのレストランのハンバーガーが美味しいという情報あった時， そのレストランの住所の情報は事実に関する知識であり，ファーストフード店という分類は世界に関する一般的知識であり，その店の料理が美味しいというのは経験的知識である． オープンなデータベース，知識ベースのうち，大規模なものとしては，Wikipedia, DBpedia, Wikidata, OpenStreetMap (OSM) またはその LOD 版である LinkedGeoData (LGD), WordNet がある．これらを上記の 3 つの分類に当てはめると図 1 のようになる．LGD/OSM のほとんどは事実に関する知識であるが，カテゴリーは一般的知識である．Wikipedia/DBpedia は事実に関する知識と一般的知識を両方含んでいる．Wikidata も同様であるが， より事実に重きを置いている．WordNet は一般的知識と経験的知識の両方を含んでいる． 表 1 に本プロジェクトで扱っているデータベース，知識ベース （以下ではデータセット）の一覧を表示した．これらは 1 つの RDF Store に格納して利用可能になっている．ただし，本稿執</p><h3><p>1N2-OS-39a-2in1
</p></h3><p>- 2 - </p><p>LinkedGeoData，日本語 WordNet，DBpedia Ontology である． 今回は容量の都合で Wikidata は取り込んでいない．また，経緯 度 の 情 報 を 持 つ デ ー タ は ， LinkedGeoData, DBpedia Japanese, DBpedia でそれぞれ 26,351,904, 100,139, 1,014,836 であったが，日本国内分（簡単のため北海道を除く地域を矩形で近似）は，それぞれ 538,878, 67,199, 15,409 であった． なお，表の下部にあるサービスオントロジーは 3 章で説明す</p><p>図 1: 知識構造の概念図 </p><p>表 1 用意したデータセットの概要 </p><p>2.3 処理のフローと必要となる知識 今回の問題は，個人的要求から具体的な目的地を推薦するというタスクであるので，上記の 3 つの層のどれもが必要である． 今回対象とするオープンなデータベース・知識ベースだけでは</p><p>? LGD には施設等のタグは存在するが，それが何であるかの説明はないか，あるいはあっても非常に少ない</p><p>? たとえ，各施設に関する一般的な説明があったとしても， 個別の要求を店舗等の一般的な説明と結びつける知識が必要となる． 上記の問題を包括的に解決するには，要求の理解から施設に利用に関する一般的知識が幅広く必要となる．そこで今回は最</p><p>? ユーザ要求を施設で受けられるサービスとして解釈する． </p><p>? サービスは「何かをする」という行動と行動対象という組で</p><p>? サービスのオントロジーを用意して，サービスを体系的に</p><p>? 施設カテゴリーにそこで受けられるサービスを付加して， 施設オントロジーを作り，施設を体系的に探索できるよう</p><p>今回のサービスのモデル化は施設への行動計画という点だけに焦点を絞って行っている．サービスの記述に関しては多くの研究がなされているが[Sakao 07, 住田 12, 吉川 08]，これらの研究でのサービス記述との対応は今後の課題とする． 今回は，サービスオントロジーと，サービスオントロジーを使った施設オントロジーを構築した．サービスオントロジーは行動対象のオントロジーを総務省の家計調査における分類を一部利用して構築している．施設オントロジーは LGD のカテゴリーの中，施設等を抜き出し，サービスオントロジーと関連づける形で構築した．またユーザ要求の解釈に当たっての知識としては主</p><p>図 2：知識の追加と処理のフローの概念図 </p><p>3. 利用する知識と推論 </p><p>3.1 施設オントロジー 本研究の目標は施設への行動計画だが，ユーザの要求に対して個別の施設の事実をもとに直接探索するのではなく，ある施設においてユーザが行うことができる典型的な行動から計画することとする．その理由は，個別の店舗等で実際に何ができるか，何が提供されているかという情報を取得して利用するのは困難であり，スケールしないと考えられるからである． そこで，上野動物園やヨドバシ Akiba 店といった実施設においてどんな行動ができるかは置いておき，動物園や家電量販店といった一段抽象化したレベルで施設クラスを定義し，各クラスでユーザが行うことができる典型的な行動，例えば「動物園では動物を見る」，「家電量販店では家電を買う」といった行動を，クラス定義として追加することとした．実施設において例外が出てくる可能性があるが，今回の範囲では問わないこととする． 施設オントロジーは，LGD のクラスをベースに，主にレジャーや食事に関係するものを抜粋して構築している．LGD では， OSM のノードやウェイに付随するタグから浅いクラス階層を構築しており，それを各インスタンスのクラスとしている．LGD/OSM を用いることで，比較的新しい施設や施設の種類を取り込める． 一方で，LGD/OSM はデータがボトムアップに作成されているため，インスタンスレベルでは実在する施設のカバー率，クラスレベルではタグの表記揺れによるクラスの重複が大きな問題となる．実在する施設をどの程度カバーしているのかは測ることができないが，LGD/OSM は自由に使える施設データとしては最大級であるので，利用できる範囲内で行うこととした．また，クラスの重複については，OSM 側に説明があるものやインスタン
</p><p>                 
</p><p>         (Fact DB)
</p><p>Linked Geo Data (Open Street Map)
</p><p>DBpedia/Wikipedia
</p><p>Wikidata WordNet
</p><p>- 3 - </p><p>ス数が多いものを代表クラスとして、残りを owl:equivalentClass で関係付けることとした． 施設オントロジーにおける，動物園の例を図 3 に示す．動物園クラス (lgdo:Zoo) には，動物園が提供するサービスとして， 「文化施設入場料を払う」というサービスと，「動物を見る」というサービスが記述されている．各サービスは，ユーザが行うことができる行動とその行動対象のペアとして記述する．サービス記述を外部から知識獲得するのは困難であるので，本稿では必要な範囲内において人手で作成している． 施設オントロジーでは LGD クラスに関連する LGD 外のクラスもリンクしている．図 3 の lgdo:Zoo クラスでは DBpedia Ontology の dbo:Zoo クラスにリンクしてある．これにより関連する複数のデータセットを対象とした施設インスタンスの検索が可能である．dbo:Zoo からは Wikidata の wikidata:Q43501 へのリンク</p><table border="1"><tbody><tr><td><p>lgdo:Zoo a owl:Class; servicevoc:dbpediaClass dbo:Zoo ; servicevoc:provideService [ servicevoc:hasService [ servicevoc:action action:払う; servicevoc:target target:文化施設入場料 ], [ servicevoc:action action:見る; servicevoc:target target:動物 ]] ; rdfs:subClassOf servicevoc:Facility . </p></td></tr></tbody></table><p>図 3: 施設オントロジー例 </p><p>3.2 行動対象オントロジー サービスを記述する上で，行動とその行動対象を体系的に記述する必要がある．行動対象として，総務省統計局の家計調査 収支項目分類一覧 (平成 27 年１月)1 をまずは用いることとした． 施設におけるユーザの行動は，何かを買う・何かしてもらうために払うといった購買行動と，それ以外の行動にわけられる．この分類は統計のためにユーザの消費行動対象を階層構造でまとめているので，手始めに購買行動の対象とするのに良いのと， 将来統計データとの連携も考えることができるからである． 購買行動以外の行動や行動対象については，WordNet を間接的に参照するようにしている．行動は動詞，行動対象は名詞になるのと，それぞれの語の関係についての WordNet の知識を推論時に用いたいからである．また，直接 WordNet の URI を用いるのではなく間接的に参照しているのは今後 DBpedia 等</p><table border="1"><tbody><tr><td><p>target:食料 a owl:Class; rdfs:label "食料"; servicevoc:wordnet wnja11instances:word-食料 ; rdfs:subClassOf target:購買対象 . </p></td></tr></tbody></table><p>図 4: 行動対象オントロジー例 </p><p>3.3 サービスオントロジー 施設オントロジーにおいて施設クラス毎に対応するサービスを列挙すると，異なる施設クラスで共通のサービスがでてくる． 例えば博物館と美術館は共に「文化施設入場料を払う」というサービスがある．また，前節でも述べた通りユーザの行動対象には階層関係がある場合があるが，それを対象とするサービスも同様に関係があると考えられる．例えば「動物を見る」は「ライオ</p><p>1 http://www.stat.go.jp/data/kakei/koumoku/bunrui27.htm そこで施設オントロジーと行動対象の間に，施設クラスから独立したサービス自体のオントロジーを構築することで，個々のサービスの関係を辿った推論をできるようにする (図 5)．トップレベルを施設_サービスとして，その下に購買行動を対象とする購買
</p><table border="1"><tbody><tr><td><p>service:食料_サービス a owl:Class; rdfs:label "食料_サービス"; servicevoc:action action:買う; servicevoc:target target:食料; rdfs:subClassOf service:購買_サービス . </p></td></tr></tbody></table><p>図 5: サービスオントロジー例 </p><p>3.4 要求の解釈に関する知識 車の中という限定環境ではあるが，システムはユーザの発話を理解しなければならない．本来想定している「要望」，「質問」， 「雑談」などの対話機能のうち，本稿では「要望」について，インターネット経由で外部の情報を参照しつつ行動計画を立て，乗員に提案する機能のプロトタイプを開発した． 例えば，乗員の「ライオンが見たいな」という発話に対して，これを要望と解釈して，ライオンを見ることのできる行動を提案する．そのために，日本語の形態素解析と簡単な格解析を実施した．形態素解析には mecab の Common Lisp 版である cl-igo2を， 格解析には shift-reduce アルゴリズム [三木 2014]を Common Lisp 用に自作して用いた．辞書には IPADIC を用いた．形態素解析結果で得られる品詞情報が色々な場面で有効に用いられた．例えば，「見る」とか「食べる」といった行動動詞の連用形のつぎに助動詞「たい」があれば，その文章全体を「要望」と解釈する．終助詞や読点はストップワードとして無視される．なお，cl-igo で提供される IPADIC 辞書は，動詞について基本形のみならずその活用形まで展開されているので便利である． 要望〔ライオン を 見る〕という解釈から，次にシステムは action 〔見る〕，target 〔ライオン〕として，ライオンを見ることのできる施設を，行動対象オントロジーや施設オントロジーを利用して探索する．しかし公にはライオンは動物園にいるという常識はどこにもない．ここで探索に失敗したとき，WordNet を用いて target を汎化して探索を繰り返す．ライオンが動物まで汎化されたとき， 図３の動物園クラスが利用可能になる．探索の答えが得られた</p><p>3.5 推論 当初，状態空間による前向き推論や後向き推論による計画 [Ghallab 04]に isa 論理関数を導入した推論を試みたが，その結果から WordNet や施設オントロジーを探索するのに無駄があった．それよりは SPARQL クエリを用いた複合オントロジーの探索のほうが，容易に行動対象オントロジーや施設オントロジーから施設インスタンスを検索できた．実行速度も問題ない． 最終的にユーザに提示したいのは，ユーザの要求に応える現在地周辺の施設である．3.4 によって，施設オントロジーからユーザの要求に沿う LGD クラスを見つけられる．LGD クラスがわかれば，SPARQL によって LGD 内で該当する施設インスタンスを直接検索可能である．また，LGD からリンクされている DBpedia クラスがある場合は DBpedia Japanese も検索する． 行動計画用の知識をオントロジーとして推論システムから追い出すことで，推論計画システムに触ることなく，外部にてオント
</p><p>2 https://igo.osdn.jp/cl-igo.html </p><p>- 4 - </p><p>ロジーの拡充や精密化が可能となる．大量データによる計画推</p><p>4. システムの構成 </p><p>現在のシステム構成は RDF Store 部と，ユーザの要求を解釈して RDF Store に問い合わせる推論部からなる (図 6)．RDF Store 部は DBpedia，LGD，WordNet 等既存の事実や知識と，3 章で述べたサービスオントロジー群を Virtuoso7 に入れている． ユーザ要求の解釈及び推論部分は Common Lisp で記述して</p><p>図 6: システム構成と処理の流れ </p><p>5. 実行例 </p><p>トヨタ東富士研究所を現在地として，スポーツをして温泉に行きたいという要望に対して近傍にある施設を検索した例を以下</p><table border="1"><tbody><tr><td><p>SYSTEM(4): (eliza) system> スポーツがしたいな。そのあと、温泉に行きたい。 現在地はトヨタ東富士研究所です。 </p><p>スポーツをする場所を探します。 ...... 一番近くの場所を案内します。 距離は 13.37621km です。 場所：沼津市営球場 緯度：35.1125 経度：138.863 URL："http://linkedgeodata.org/triplify/node2877270449" 現在地は(35.1125 . 138.863)です。 温泉に入る場所を探します。 ...... 一番近くの場所を案内します。 距離は 10.426165km です。 場所：伊豆長岡温泉 緯度：35.0353 経度：138.929 URL："http://ja.dbpedia.org/resource/伊豆長岡温泉" </p></td></tr></tbody></table><p> </p><p>ここで(eliza)となっているが，それは一番外側のプログラム構造に Eliza を真似たからである．入力データは形態素解析=> 格解析による基本形抽出=>クエリ文字列生成を経て SPARQL 検索を実行する．検索結果は出力用に調整されて，出力される． 簡単な言語処理によって多様な入力に対応できていること，記憶機構がないために，同じ質問に対してうまく対応できていない</p><p>6. 考察 </p><p>今回，異なるデータセットを組み合わせて，一貫した推論を</p><p>? 複数のデータセットを同時に利用して問題解決するには， それらの収録範囲や粒度といった特性を理解する必要があるが，大規模なデータセットの場合は容易ではない．今回は，特定の問題解決を前提に実際のデータの入手可能性を調べ，その上で全体のデータセット利用計画を作</p><p>? データセット間の関係を作ることは容易ではない．単純な文字列マッピングであれば機械的な処理ができるが，オントロジー・マッピングは人力に頼らざるをえない．このマッピングの精度は結果に大きく響くので機械的な処理が難しい．更に今回は中間のオントロジーを構築してマッピング</p><p>? DBpedia と LGD は crowd sourcing で作られているデータセットのため，完全性は期待できない．データの欠損や偏りはまだしも，間違ったデータ等が入っている場合は推論時に問題となる．今回は発見次第，回避するようにしてい</p><p>? 推論のフローは今回の問題に合わせて設計した．異なる問題では異なるデータセットの利用方法が考えられる．例えば，どこまで上位の知識で解決して，どこから下位の知識（ファクト）で解決するかは問題や問題の状況に依存す</p><p>7. まとめ </p><p>本研究では，複数のオープンな大規模データベース・知識ベースを使って，日常世界の事象に関する推論システムを試作した．今回は複数データセットを組み合わせることでどんな利用が可能かを実験的に調べたものである．大局的には，日常世界に関して豊富な知識があり，それが推論で利用可能であることが分かった．しかし，知識の不十分さも同時に分かった．今後はオープンな知識をさらに適切に利用可能にすると同時に他の知</p><p>参考文献 [Davis 16] Davis, E. and Marcus, G.: Commonsense reasoning and commonsense knowledge in artificial intelligence. Commun. ACM, Vol. 58, No. 9, pp.92-103. (2015) DOI: https://doi.org/10.1145/2701413． [Ghallab 04] Ghallab, M., Nau, D. and Traverso, P. : Automated Planning, theory and practice, Elsevier (2004) . </p><p>[Sakao 07] Sakao T. and Shimomura Y.: Service CAD System to Support Servicification of Manufactures, In: Takata S., Umeda Y. (eds) Advances in Life Cycle Engineering for Sustainable Manufacturing Businesses, Springer London, pp.143-148 (2007) . </p><p>[住田 12] 住田 光平, 來村 徳信, 笹嶋 宗彦, 高藤 淳, 溝口 理一郎: オントロジー工学に基づくサービスの本質的性質の</p><p>[三木 14] 三木 光範, 加藤 恒昭: 自然言語処理, 共立出版 (2014) . </p><p>[吉川 08] 吉川 弘之: サービス工学序説, −サービスを理論的</p><p>推論プロセス 3: 施設探索プロセス 2: 施設クラス探索プロセス 1: 行動対象探索
</p><p>行動: 見る 行動対象: ライオン 0 要求解釈
</p><p>RDF Store
</p><table border="1"><tbody><tr><td><table border="1"><tbody><tr><td><p>行動対象オントロジー
</p></td></tr><tr><td><p>WordNet
</p></td></tr></tbody></table></td></tr><tr><td><p>施設オントロジー
</p><table border="1"><tbody><tr><td><p>LinkedGeoData DBpedia Japanese
</p></td></tr></tbody></table></td></tr></tbody></table><p>行動: 見る 行動対象: 動物 1-n ない場合行動対象を汎化して 1へ
</p><p>施設クラス: lgdo:動物園
</p><table border="1"><tbody><tr><td colspan="2"><p>Q1 行動対象があるか
</p></td></tr><tr><td><p>-n ない場合 1へ
</p></td><td></td></tr></tbody></table><p>Q3 施設があるか 2</p><p>3-n ない場合 1へ 1-y 行動対象あり
</p><p>2-y 施設クラスあり
</p><table border="1"><tbody><tr><td><p>3-y 施設あり
</p></td></tr></tbody></table><table border="1"><tbody><tr><td><p>ユーザ要求 "ライオンが見たい"
</p></td></tr></tbody></table><table border="1"><tbody><tr><td><p>出力 "恩賜上野動物園"
</p></td></tr></tbody></table><p>Q2 施設クラスがあるか
</p></body></html>